;;; -*- Lisp -*-

(def-test-system :versioned-system-1
  :pathname #.*test-directory*
  :version "1.0")

(def-test-system :versioned-system-2
  :pathname #.*test-directory*
  :version "1.1")

(def-test-system :versioned-system-3
  :defsystem-depends-on ((:version :test-asdf/file2 "2.1"))
  :pathname #.*test-directory*
  :version "1.2")

(defun vtest (name v &optional (true t))
  (or (eq true (version-satisfies (find-system name) v))
      (error "no satisfaction: ~S version ~A not ~A" name v true)))
(vtest :versioned-system-1 "1.0")
(vtest :versioned-system-2 "1.0")
(vtest :versioned-system-3 "2.0" nil)

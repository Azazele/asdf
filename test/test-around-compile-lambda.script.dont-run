;;; -*- Lisp -*-


(progn
  (def-test-system test-around-compile-lambda
    :around-compile (lambda (thunk)
                      (let ((*read-base* 2))
                        (funcall thunk)))
    ;; :depends-on ((:version :asdf "2.017.18")) ; no :around-compile before that.
    :components ((:file "test")))
  (load-system 'test-around-compile-lambda :force t)
  (assert (= 3 (funcall 'add10 1)))) ;; add10 must have been compiled in base 2

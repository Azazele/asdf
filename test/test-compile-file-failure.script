;;; -*- Lisp -*-

(load-asdf)

(progn
 #-gcl<2.7
 (assert (handler-case
             (let ((asdf:*compile-file-failure-behaviour* :warn))
               (asdf:load-system 'test-compile-file-failure :force t)
               t)
           (asdf/lisp-build:compile-file-error () nil)))
 #-gcl<2.7
 (assert (handler-case
             (let ((asdf:*compile-file-failure-behaviour* :error))
               (asdf:load-system 'test-compile-file-failure :force t)
               nil)
           (asdf/lisp-build:compile-file-error () t))))
